!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.TinSlide=e()}(this,function(){return function(t,e){var s={debug:!1,container:null,container:null,containerWidth:0,items:[],numItems:0,numHalfItems:0,pointer:0,pointerVal:0,itemsVisible:{},targetVal:0,targetIndex:0,targetIndexWithinBounds:0,timerAnimate:0,stepSnap:3e-4,stepFactor:.2,stepMax:.2,stepMin:4e-4,step:0,stepAbs:0,stepTurnBreakFactor:.5,choke:0,chokeReleaseStep:.05,chokeReleaseFactor:1.5,chokeReturnFactor:2,cropContainer:!0,effects:{slideHorizontal:{on:!0,offset:1},scale:{on:!1,min:.8,max:1,minAt:1,maxAt:0},fade:{on:!1,min:0,max:1,minAt:1,maxAt:0},motionBlur:{on:!1,maxPixels:2,stepMin:.05,factor:500}},useUpdateContainerHeight:!1,containerHeight:0,timerUpdateContainerHeight:0,verticallyCenter:!1,useContainerClickNextPrev:!1,useSwipeNavigation:!0,swipePressX:0,timerSwipePress:0,swipePressPointerVal:0,swipeTargetVal:0,timerSwipe:0,swipeStepBreak:.4,swipeStepFactor:.25,swipeX:0,swipeXAbs:0,swipePressWaitBeforeInvokeGrabbing:!1,swipeReleaseRequiredSwipeX:0,generate:{dots:{on:!0,afterContainer:!0},nav:{on:!0,afterContainer:!0}},dotsItems:null,currentDotIndex:null,nav:null,ratio:null,ratioPercent:null,hasHeight:!1,autoPlay:!1,timerAutoPlay:0,autoPlayTime:5e3,autoPlayState:null,autoPlayPauseOnHover:!0,autoPlayStopOnNavigation:!0,autoPlayForwards:!0,loop:!0,useNonLoopingHint:!0,timerNonLoopingHint:0,zIndex:0,hideUsingVisibility:!1,init:function(t,e){this.container=t;var i;this.body=document.getElementsByTagName("body")[0],void 0!==e&&this.setOptions(this,e);var s=t.getElementsByClassName("tin-slide-img"),n=[];for(v=0,y=s.length;v<y;v++)n.push(s[v]);for(;n.length;){var a=n.shift(),o=document.createElement("img");(d=a.getAttribute("data-src"))&&void 0!==d&&""!==d&&o.setAttribute("src",d);var r=a.getAttribute("data-srcset");r&&void 0!==r&&""!==r&&o.setAttribute("srcset",r);var h=a.getAttribute("data-bg");h&&void 0!==h&&""!==h&&o.setAttribute("style",'background: url("'+h+'") no-repeat center; background-size: cover;'),a.replaceWith(o)}var l=t.getElementsByClassName("tin-slide-bg"),u=[];for(v=0,y=l.length;v<y;v++)u.push(l[v]);for(;u.length;){var d;(d=(a=u.shift()).getAttribute("data-src"))&&void 0!==d&&""!==d&&a.setAttribute("style",'background: url("'+d+'") no-repeat center; background-size: cover;')}var c=t.getElementsByClassName("tin-slide-markup"),p=[];for(v=0,y=c.length;v<y;v++)p.push(c[v]);for(;p.length;){a=p.shift();var m=document.createElement("template");m.innerHTML=a.getAttribute("tin-slide-markup"),a.replaceWith(m.content.firstChild)}var f=[];for(v=0,len=this.container.childNodes.length;v<len;v++)(i=this.container.childNodes[v]).nodeType===Node.ELEMENT_NODE&&f.push(i);this.items=f,this.numItems=this.items.length,this.numHalfItems=this.numItems/2,this.ratio&&(this.ratioPercent=1/this.ratio*100);var v;for(v=0;v<this.numItems;v++)(i=this.items[v]).tinSlideIndex=v,i.style.top="0",i.style.left="0",i.style.width="100%",i.style.position="absolute",this.hideOrShowElement(i,!0);this.container.style.position="relative",this.cropContainer&&(this.container.style.overflow="hidden"),this.ratio&&(this.container.style.paddingTop=this.ratioPercent+"%"),this.zIndex&&(this.container.style.zIndex=this.zIndex);var g=this;if(this.useContainerClickNextPrev&&this.container.addEventListener("click",function(t){var e=g.getContainerWidth();e&&(t.clientX-g.container.offsetLeft<e/2?g.previous():g.next())}),this.items.length>1&&this.useSwipeNavigation){this.container.style.cursor="-webkit-grab";var I={"user-drag":"none","user-select":"none","-moz-user-select":"none","-webkit-user-drag":"none","-webkit-user-select":"none","-ms-user-select":"none"};for(v=0;v<this.numItems;v++){this.css(this.items[v],I);for(var x=this.items[v].getElementsByTagName("img"),w=0,y=x.length;w<y;w++)this.css(x[w],I)}this.container.addEventListener("touchstart",function(t){g.onSwipePress(t)}),this.container.addEventListener("mousedown",function(t){g.onSwipePress(t)})}this.useUpdateContainerHeight&&(this.updateContainerHeight(),window.addEventListener("resize",function(){g.updateContainerHeight()})),this.verticallyCenter&&(this.container.style.display="flex",this.container.style.flexDirection="column",this.container.style.justifyContent="center"),window.addEventListener("resize",function(){g.containerWidth=0}),this.items.length>1&&(this.generate.dots.on&&(this.dots=this.createDots(),this.container.parentNode.insertBefore(this.dots,this.generate.dots.afterContainer?this.container.nextSibling:this.container)),this.generate.nav.on&&(this.nav=this.createNav(),this.container.parentNode.insertBefore(this.nav,this.generate.nav.afterContainer?this.container.nextSibling:this.container))),this.setPointer(this.targetIndex),this.updateDots(),this.items.length>1&&(this.autoPlay&&this.startAuto(),this.autoPlayPauseOnHover&&(this.container.addEventListener("mouseenter",function(t){g.pauseAuto()}),this.container.addEventListener("mouseleave",function(t){g.resumeAuto()})))},css:function(t,e){for(var i in e)t.style[i]=e[i]},addClass:function(t,e){var i=t.className.split(" ");-1===i.indexOf(e)&&i.push(e),t.className=i.join(" ")},removeClass:function(t,e){var i=t.className.split(" "),s=i.indexOf(e);-1!==s&&i.splice(s,1),t.className=i.join(" ")},hasClass:function(t,e){return t.className.split(" ").indexOf(e)>-1},hideOrShowElement:function(t,e){this.hideUsingVisibility?t.style.visibility=e?"hidden":"visible":t.style.display=e?"none":"block"},setOptions:function(t,e){for(var i in e){var s=typeof t[i];s!==typeof e[i]&&null!==t[i]||("object"===s&&null!==t[i]?this.setOptions(t[i],e[i]):t[i]=e[i])}},createDots:function(){var t=this,e=document.createElement("UL");e.setAttribute("class","tin-slide-dots");var s=function(e){t.onDotClick(e)};for(this.dotsItems=[],i=0;i<this.numItems;i++){var n=document.createElement("LI");n.setAttribute("class","tin-slide-dot-"+i),n.setAttribute("tin-slide-index",i),n.style.cursor="pointer",e.appendChild(n),this.dotsItems.push(n),n.addEventListener("click",s)}return e},createNav:function(){var t=this,e=document.createElement("NAV");e.setAttribute("class","tin-slide-next-prev");var i=document.createElement("DIV");i.setAttribute("class","tin-slide-prev"),i.style.cursor="pointer",i.addEventListener("click",function(e){t.previous()}),e.appendChild(i);var s=document.createElement("DIV");return s.setAttribute("class","tin-slide-next"),s.style.cursor="pointer",s.addEventListener("click",function(e){t.next()}),e.appendChild(s),e},setPointer:function(t){this.pointerVal=t;var e=t%this.numItems;e<0&&this.loop&&(e+=this.numItems),this.pointer=e;var i=[],s=Math.floor(this.pointer);if(s>=0&&i.push(this.items[s]),this.pointer!==s){var n=Math.ceil(this.pointer);this.loop&&(n%=this.numItems),n<this.items.length&&i.push(this.items[n])}var a;for(a in this.itemsVisible)this.itemsVisible[a]=null;for(var o,r=i.length,h=0;h<r;h++){o=i[h],void 0===this.itemsVisible[o.tinSlideIndex]&&this.hideOrShowElement(o,!1);var l=this.pointer-o.tinSlideIndex;l>1&&(l-=this.numItems),this.itemsVisible[o.tinSlideIndex]=l;var u=!1;l>.5||l<-.5||u?(o.style.position="absolute",this.verticallyCenter&&(o.style.top="50%",o.style.marginTop="-"+.5*o.offsetHeight+"px"),o.style.zIndex=""):(u=!0,this.ratio||this.hasHeight||(o.style.position="relative",this.verticallyCenter&&(o.style.top="auto",o.style.marginTop="inherit")),this.zIndex&&(i[h].style.zIndex=this.zIndex+1))}for(a in this.itemsVisible)null===this.itemsVisible[a]&&(delete this.itemsVisible[a],o=this.items[a],this.hideOrShowElement(o,!0),o.style.position="absolute");this.applySlideEffect()},next:function(t){var e=!1;if(this.items.length>1&&(!0!==t&&this.autoPlayStopOnNavigation&&this.stopAuto(),!this.timerSwipe))if(this.loop||this.targetIndex<this.numItems-1)this.targetIndex++,this.targetVal=this.targetIndex,this.animateToTarget(),e=!0;else if(!t&&this.useNonLoopingHint){this.targetVal=this.numItems-1+.05,this.animateToTarget();var i=this;this.timerNonLoopingHint=setTimeout(function(){i.targetVal=i.targetIndex,i.animateToTarget()},200)}return e},previous:function(t){var e=!1;if(this.items.length>1&&(!0!==t&&this.autoPlayStopOnNavigation&&this.stopAuto(),!this.timerSwipe))if(this.loop||this.targetIndex>0)this.targetIndex--,this.targetVal=this.targetIndex,this.animateToTarget(),e=!0;else if(!t&&this.useNonLoopingHint){this.targetVal=-.05,this.animateToTarget();var i=this;this.timerNonLoopingHint=setTimeout(function(){i.targetVal=i.targetIndex,i.animateToTarget()},200)}return e},onSwipePress:function(t){if(this.items.length>1){var e="touchstart"===t.type;if("A"===t.target.nodeName)return;var i=t;if(void 0!==i.button&&2===i.button||void 0!==i.which&&3===i.which)return;if(this.swipePressX=e?t.layerX:t.clientX,this.swipeX=0,this.swipeXAbs=0,this.swipePressWaitBeforeInvokeGrabbing){var s=this;clearTimeout(this.timerSwipePress),this.timerSwipePress=setTimeout(function(){s.onTimerSwipePress()},75);var n=function(){clearTimeout(s.timerSwipePress),document.removeEventListener("touchend",this.onRelease),document.removeEventListener("mouseup",this.onRelease)};document.addEventListener("touchend",n),document.addEventListener("mouseup",n)}else this.onTimerSwipePress()}},onTimerSwipePress:function(){this.container.style.cursor="-webkit-grabbing",clearTimeout(this.timerNonLoopingHint),this.autoPlayStopOnNavigation&&this.stopAuto(),this.timerAnimate&&(clearInterval(this.timerAnimate),this.timerAnimate=0);var t=0,e=this.step;for(i=0;i<25;i++)t+=e*=this.swipeStepFactor;this.swipePressPointerVal=this.pointerVal+t,this.swipeTargetVal=this.swipePressPointerVal;var s=this,n={onSwipeMove:function(t){s.onSwipeMove(t)},onSwipeRelease:function(){document.removeEventListener("touchmove",n.onSwipeMove),document.removeEventListener("mousemove",n.onSwipeMove),document.removeEventListener("touchend",n.onSwipeRelease),document.removeEventListener("mouseup",n.onSwipeRelease),s.onSwipeRelease()}};document.addEventListener("touchmove",n.onSwipeMove),document.addEventListener("mousemove",n.onSwipeMove),document.addEventListener("touchend",n.onSwipeRelease),document.addEventListener("mouseup",n.onSwipeRelease),this.startSwipeTimer()},onSwipeRelease:function(){if(this.container.style.cursor="-webkit-grab",this.swipeXAbs>=this.swipeReleaseRequiredSwipeX){var t;if(this.step<-.04)t=Math.floor(this.pointerVal);else if(this.step>.04)t=Math.ceil(this.pointerVal);else{var e=15*this.step,s=this.step;for(i=0;i<80;i++)e+=s*=this.swipeStepFactor;var n=this.pointerVal+e;t=Math.round(n)}this.choke=1;var a=this;setTimeout(function(){a.timerSwipe&&(clearInterval(a.timerSwipe),a.timerSwipe=0),a.targetIndex=t,a.targetVal=a.targetIndex,a.animateToTarget()},1)}else clearInterval(this.timerSwipe),this.timerSwipe=0},onSwipeMove:function(t){if(void 0===t.tinSlideMoved){var e="touchmove"===t.type,i=this.getContainerWidth();if(i){this.swipeX=this.swipePressX-(e?t.layerX:t.clientX),this.swipeXAbs=this.swipeX<0?-this.swipeX:this.swipeX;var s=this.swipePressPointerVal+this.swipeX/i;if(!this.loop){var n=this.useNonLoopingHint?.05:0;s<-n?s=-n:s>this.numItems-1+n?s=this.numItems-1+n:t.tinSlideMoved=!0}this.swipeTargetVal=s;var a=Math.round(this.swipeTargetVal)%this.numItems;a<0&&(a+=this.numItems),this.targetIndexWithinBounds=a,this.updateDots()}}},startSwipeTimer:function(){if(!this.timerSwipe){var t=this;this.timerSwipe=setInterval(function(){t.onTimerSwipe()},25)}},onTimerSwipe:function(){var t=this.pointerVal,e=(this.swipeTargetVal-t)*this.swipeStepFactor;this.step=e,this.stepAbs=this.step<0?-this.step:this.step,t+=e,this.setPointer(t)},getContainerWidth:function(){return this.containerWidth||(this.containerWidth=t.offsetWidth),this.containerWidth},animateTo:function(t){this.targetIndex=t%this.numItems,this.targetIndex<0&&(this.targetIndex+=this.numItems),this.targetIndexWithinBounds=this.targetIndex,this.updateDots();var e=this.pointerVal%this.numItems;if(this.loop){var i=e-this.targetIndex;i>this.numHalfItems?e-=this.numItems:i<-this.numHalfItems&&(e+=this.numItems)}this.pointerVal=e,this.targetVal=this.targetIndex,this.animateToTarget()},animateToTarget:function(){clearTimeout(this.timerNonLoopingHint);var t=this.targetIndex%this.numItems;if(t<0&&(t+=this.numItems),this.targetIndexWithinBounds=t,this.updateDots(),this.useUpdateContainerHeight&&this.updateContainerHeight(),!this.timerAnimate){var e=this;this.timerAnimate=setInterval(function(){e.onAnimationTimer()},25)}},onAnimationTimer:function(){var t=this.pointerVal,e=this.targetVal-t,i=e<0?-e:e;if(i<this.stepSnap)this.step=this.stepAbs=0,this.setPointer(this.targetVal),clearInterval(this.timerAnimate),this.timerAnimate=0;else{var s=e*this.stepFactor;if(s*this.step>=0){if(this.step=e*this.stepFactor,this.choke<1&&(this.choke=this.choke*this.chokeReleaseFactor+(this.choke||this.chokeReleaseStep?this.chokeReleaseStep:.05)),this.choke>i&&(this.choke=i*(.5+this.chokeReturnFactor)),this.choke>1&&(this.choke=1),this.step>this.stepMin||this.step<-this.stepMin){var n=this.choke*this.stepMax;this.step>n?this.step=n:this.step<-n&&(this.step=-n),this.step>this.stepMin||this.step<-this.stepMin||(this.step=this.stepMin*(this.step<0?-1:1))}this.stepAbs=this.step<0?-this.step:this.step,t+=this.step}else(s=this.step*(1-this.stepTurnBreakFactor))>this.stepSnap||s<-this.stepSnap?this.step=s:this.step=0,t+=s;this.stepAbs=this.step<0?-this.step:this.step,this.setPointer(t)}},goTo:function(t){clearTimeout(this.timerNonLoopingHint),this.autoPlayStopOnNavigation&&this.stopAuto(),this.timerAnimate&&(clearInterval(this.timerAnimate),this.timerAnimate=0),this.targetIndex=t%this.numItems,this.targetIndex<0&&(this.targetIndex+=this.numItems),this.targetIndexWithinBounds=this.targetIndex,this.updateDots(),this.useUpdateContainerHeight&&this.updateContainerHeight(),this.setPointer(this.targetIndexWithinBounds)},updateContainerHeight:function(t){if(void 0===t)if((i=this.getParentSlides()).length)i[0].updateContainerHeight();else{var e=this.getSubSlides();e.length?e[0].updateContainerHeightFromParent():this.doUpdateContainerHeight()}else{this.doUpdateContainerHeight(t);var i;(i=this.getParentSlides().reverse()).length&&i[0].updateContainerHeight(this.containerHeight)}},doUpdateContainerHeight:function(t){void 0===t&&(t=0);var e=this.items[this.targetIndexWithinBounds].offsetHeight;e||(this.items[this.targetIndexWithinBounds].style.display="block",e=this.items[this.targetIndexWithinBounds].offsetHeight),e<t&&(e=t),this.containerHeight!==e&&(this.containerHeight=e,this.css(this.container,{height:e+"px"}))},updateContainerHeightFromParent:function(){this.updateContainerHeight(0)},getParentSlides:function(){var t=[];return function e(i){i.parentNode&&void 0!==i.parentNode&&(void 0!==i.parentNode.tinSlide&&t.push(i.parentNode.tinSlide),e(i.parentNode))}(this.container),t.reverse()},getSubSlides:function(){var t=[];return function e(i){for(var s=0,n=i.childNodes.length;s<n;s++)void 0!==i.childNodes[s].tinSlide?(t.push(i.childNodes[s].tinSlide),e(i.childNodes[s].tinSlide.getCurrentItem())):e(i.childNodes[s])}(this.items[this.targetIndexWithinBounds]),t.reverse()},applySlideEffect:function(){for(var t in this.itemsVisible){var e=this.items[t],i=this.itemsVisible[t],s=i<0?-i:i,n=[];if(this.effects.slideHorizontal.on&&n.push("translateX("+100*this.effects.slideHorizontal.offset*-i+"%)"),this.effects.scale.on){var a;if(s<this.effects.scale.maxAt)a=this.effects.scale.max;else if(s<this.effects.scale.minAt){var o=1-(s-this.effects.scale.maxAt)/(this.effects.scale.minAt-this.effects.scale.maxAt);a=this.effects.scale.min+o*(this.effects.scale.max-this.effects.scale.min)}else a=this.effects.scale.min;n.push("scale("+a+", "+a+")")}if(n.length&&(e.style.transform=n.join(" ")),this.effects.fade.on){var r;if(s<this.effects.fade.maxAt)r=this.effects.fade.max;else if(s<this.effects.fade.minAt){var h=1-(s-this.effects.fade.maxAt)/(this.effects.fade.minAt-this.effects.fade.maxAt);r=this.effects.fade.min+h*(this.effects.fade.max-this.effects.fade.min)}else r=this.effects.fade.min;e.style.opacity=r}}this.effects.motionBlur.on&&this.applyBlur()},applyBlur:function(){var t=this.stepAbs-this.effects.motionBlur.stepMin;t<0&&(t=0);var e=t*this.effects.motionBlur.factor;e>this.effects.motionBlur.maxPixels&&(e=this.effects.motionBlur.maxPixels);var i=e?"blur("+e+"px)":"";for(var s in this.itemsVisible)this.items[s].style.filter=i},updateDots:function(){if(this.dots&&this.currentDotIndex!==this.targetIndexWithinBounds){var t;null!==this.currentDotIndex&&(t=this.dotsItems[this.currentDotIndex],this.removeClass(t,"on")),this.currentDotIndex=this.targetIndexWithinBounds,t=this.dotsItems[this.currentDotIndex],this.addClass(t,"on")}},onDotClick:function(t){this.autoPlayStopOnNavigation&&this.stopAuto();var e=parseInt(t.target.getAttribute("tin-slide-index"),10);this.animateTo(e)},startAuto:function(){"started"!==this.autoPlayState&&(this.autoPlayState="started",this.resumeAuto())},pauseAuto:function(){this.autoPlayState&&(this.autoPlayState="paused",clearInterval(this.timerAutoPlay),this.timerAutoPlay=0)},resumeAuto:function(){if(this.autoPlayState){this.autoPlayState="started";var t=this;this.timerAutoPlay=setInterval(function(){if(t.container.clientHeight&&!t.hasClass(t.body,"window-hidden")){var e=t.autoPlayForwards?t.next(!0):t.previous(!0);e||(t.autoPlayForwards=!t.autoPlayForwards,e=t.autoPlayForwards?t.next(!0):t.previous(!0))}},this.autoPlayTime)}},stopAuto:function(){this.autoPlayState&&(this.pauseAuto(),this.autoPlayState=null)}};s.init(t,e);var n={next:function(t){s.next()},previous:function(t){s.previous()},animateTo:function(t){s.animateTo(t)},goTo:function(t){s.goTo(t)},getDots:function(){return s.dots?s.dots:s.createDots()},getNav:function(){return s.nav?s.nav:s.createNav()},startAuto:function(){s.startAuto()},stopAuto:function(){s.stopAuto()},updateContainerHeight:function(t){s.updateContainerHeight(t)},updateContainerHeightFromParent:function(){s.updateContainerHeightFromParent()},getCurrentItem:function(){return s.items[s.targetIndexWithinBounds]}};return t.tinSlide=n,this}});